<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tshwane Busses</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link rel="manifest" href="manifest.json">
  
  <style>
    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    body {
        background: linear-gradient(135deg, #1a2f3a, #0d1b24);
        color: #f0f0f0;
        line-height: 1.6;
        min-height: 100vh;
    }
    
    body::before {
        content: "";
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.3);
        z-index: -1;
    }

    .menu-toggle {
        position: fixed;
        top: 25px;
        left: 20px;
        font-size: 24px;
        color: #27ae60;
        cursor: pointer;
        z-index: 1001;
        background: rgba(0, 0, 0, 0.5);
        padding: 10px;
        border-radius: 8px;
        transition: all 0.3s ease;
    }
    
    .menu-toggle:hover {
        background: rgba(39, 174, 96, 0.2);
        transform: scale(1.1);
    }

    .sidebar {
        position: fixed;
        top: 0;
        left: -250px;
        width: 250px;
        height: 100vh;
        background: #0d1b24;
        padding: 30px 0;
        transition: left 0.3s ease;
        z-index: 1000;
        border-right: 1px solid rgba(255,255,255,0.1);
        box-shadow: 4px 0 15px rgba(0,0,0,0.3);
    }

    .wrapper.active .sidebar { 
        left: 0; 
    }
    
    .sidebar-overlay {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 999;
        display: none;
    }
    
    .wrapper.active .sidebar-overlay {
        display: block;
    }

    .sidebar h2 {
        color: #FFD700;
        font-style: italic;
        text-align: center;
        margin-bottom: 30px;
        font-size: 1.8rem;
    }
    
    .sidebar ul { 
        list-style: none; 
    }
    
    .sidebar ul li {
        padding: 15px 20px;
        display: flex;
        align-items: center;
        gap: 12px;
        transition: background 0.3s ease;
        cursor: pointer;
    }
    
    .sidebar ul li a {
        color: #fafafc;
        text-decoration: none;
        font-size: 1rem;
        flex-grow: 1;
    }
    
    .sidebar ul li:hover { 
        background: rgba(255,255,255,0.05); 
    }
    
    .sidebar ul li:hover a { 
        color: #27ae60; 
    }
    
    .sidebar ul li i {
        width: 20px;
    }

    nav.header-bar {
        width: 100%;
        height: 80px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 40px;
        color: white;
        background: linear-gradient(135deg, #000, #0d1b24);
        box-shadow: 0 4px 15px rgba(0,0,0,0.4);
        position: fixed;
        top: 0;
        z-index: 100;
    }
    .routes_btn:hover {
        background: linear-gradient(135deg, #2ecc71, #27ae60);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(39, 174, 96, 0.4);
    }
    nav.header-bar .logo {
        flex: 1;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    nav.header-bar .logo h1 {
        font-size: clamp(1.2rem, 4vw, 2.2rem);
        font-weight: 800;
        background: linear-gradient(to right, #fff 51%, #FFD700 49%);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        text-transform: uppercase;
        letter-spacing: 1px;
    }
    
    .auth-buttons {
        display: flex;
        gap: 10px;
    }
    
    .auth-buttons button {
        padding: 8px 20px;
        border-radius: 25px;
        border: none;
        font-weight: bold;
        font-size: clamp(0.85rem, 2vw, 1rem);
        cursor: pointer;
        transition: all 0.3s;
        white-space: nowrap;
    }
    
    .login-btn {
        background: linear-gradient(135deg, #27ae60, #2ecc71);
        color: #fff;
    }
    
    .login-btn:hover {
        background: linear-gradient(135deg, #2ecc71, #27ae60);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(39, 174, 96, 0.4);
    }
    
    .signup-btn {
        background: linear-gradient(135deg, #FFD700, #FFC300);
        color: #222;
    }
    
    .signup-btn:hover {
        background: linear-gradient(135deg, #FFC300, #FFD700);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(255, 215, 0, 0.4);
    }

    .container {
        max-width: 1200px;
        margin: 100px auto 0;
        padding: 20px;
        width: 95%;
    }
     .container {
        max-width: 1200px;
        margin: 100px auto 0;
        padding: 20px;
        width: 95%;
        background: rgba(255,255,255,0.07);
        border-radius: 15px;
        box-shadow: 0 8px 32px rgba(0,0,0,0.2);
        padding: 40px 30px;
        text-align: center;
        margin-bottom: 35px;
        border: 1px solid rgba(255,255,255,0.1);
        animation: fadeInDown 1s;
    }

    .welcome-card {
        background: rgba(255,255,255,0.07);
        border-radius: 15px;
        box-shadow: 0 8px 32px rgba(0,0,0,0.2);
        padding: 40px 30px;
        text-align: center;
        margin-bottom: 35px;
        border: 1px solid rgba(255,255,255,0.1);
        animation: fadeInDown 1s;
    }
    
    .welcome-card h1 {
        font-size: clamp(1.8rem, 5vw, 2.5rem);
        color: #27F531;
        margin-bottom: 10px;
    }
    
    .welcome-card h2 {
        font-size: clamp(1.4rem, 4vw, 2rem);
        margin: 10px 0;
    }
    
    .welcome-card h2 span {
        color: #FFD700;
    }
    
    .welcome-card p {
        font-size: clamp(1rem, 2.5vw, 1.1rem);
        margin: 15px 0 25px 0;
        line-height: 1.8;
    }
     .routes_btn {
        padding: 10px 25px;
        background: #27ae60;
        color: #ffffff;
        border: none;
        border-radius: 6px;
        font-size: 1rem;
        font-weight: bold;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }
    .dropdown-content .routes_btn:hover {
        background-color: #1edc3d;
    }
    .dropdown-content{ 
        text-align: center; 
    }
    .main-btn button {
        background: linear-gradient(135deg, #27ae60, #2ecc71);
        color: #fff;
        border: none;
        border-radius: 50px;
        padding: 12px 35px;
        font-size: clamp(1rem, 2.5vw, 1.1rem);
        cursor: pointer;
        transition: all 0.3s;
        font-weight: 600;
    }
    
    .main-btn button:hover {
        background: linear-gradient(135deg, #2ecc71, #27ae60);
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(39, 174, 96, 0.4);
    }

    .dropdown {
        margin-bottom: 18px;
        background: rgba(255,255,255,0.07);
        border-radius: 15px;
        padding: 40px 30px;
        box-shadow: 0 8px 32px rgba(0,0,0,0.2);
        transition: all 0.3s;
        border: 1px solid rgba(255,255,255,0.1);
        text-align: center;
        margin-bottom: 35px;
        animation: fadeInDown 1s;
    }
    
    .dropdown:hover {
        background: rgba(255,255,255,0.07);
        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }
    
    .dropdown label {
        font-size: clamp(1rem, 3vw, 1.2rem);
        color: #FFD700;
        cursor: pointer;
        font-weight: bold;
        display: flex;
        align-items: center;
        gap: 10px;
        user-select: none;
        padding: 15px 20px;
    }
    
    .dropdown label .fa-chevron-down {
        transition: transform 0.3s;
        margin-left: auto;
    }
    
    .dropdown input[type="checkbox"] {
        display: none;
    }
    
    .dropdown-content {
        display: none;
        background: #1a2f3a;
        border-radius: 0 0 10px 10px;
        padding: 15px 20px 20px 20px;
        animation: fadeIn 0.4s;
    }
    .main-btn button {
        background: linear-gradient(135deg, #27ae60, #2ecc71);
        color: #fff;
        border: none;
        border-radius: 50px;
        padding: 12px 35px;
        font-size: clamp(1rem, 2.5vw, 1.1rem);
        cursor: pointer;
        transition: all 0.3s;
        font-weight: 600;
    }
    
    .main-btn button:hover {
        background: linear-gradient(135deg, #2ecc71, #27ae60);
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(39, 174, 96, 0.4);
    }

    .dropdown {
        margin-bottom: 18px;
        background: rgba(255,255,255,0.05);
        border-radius: 10px;
        padding: 0;
        box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        transition: all 0.3s;
        border: 1px solid rgba(255,255,255,0.08);
    }
    
    .dropdown:hover {
        background: rgba(255,255,255,0.07);
        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }
    
    .dropdown label {
        font-size: clamp(1rem, 3vw, 1.2rem);
        color: #FFD700;
        cursor: pointer;
        font-weight: bold;
        display: flex;
        align-items: center;
        gap: 10px;
        user-select: none;
        padding: 15px 20px;
    }
    
    .dropdown label .fa-chevron-down {
        transition: transform 0.3s;
        margin-left: auto;
    }
    
    .dropdown input[type="checkbox"] {
        display: none;
    }
    
    .dropdown-content {
        display: none;
        background: #1a2f3a;
        border-radius: 0 0 10px 10px;
        padding: 15px 20px 20px 20px;
        animation: fadeIn 0.4s;
    }
    
    .dropdown input[type="checkbox"]:checked ~ .dropdown-content {
        display: block;
    }
    
    .dropdown input[type="checkbox"]:checked + label .fa-chevron-down {
        transform: rotate(180deg);
    }
    
    .dropdown-content ul {
        list-style: none;
        margin-left: 0;
        color: #fff;
    }
    
    .dropdown-content ul ul {
        margin-left: 20px;
        margin-top: 8px;
    }
    
    .dropdown-content li {
        padding: 6px 0;
        line-height: 1.6;
    }
    
    .dropdown-content a {
        color: #27F531;
        text-decoration: none;
        transition: color 0.2s;
    }
    
    .dropdown-content a:hover {
        color: #FFD700;
        text-decoration: underline;
    }

    .map {
        margin-top: 40px;
        background: rgba(255,255,255,0.05);
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 4px 16px rgba(0,0,0,0.15);
        border: 1px solid rgba(255,255,255,0.08);
    }
    
    .map h1 {
        color: #FFD700;
        margin-bottom: 25px;
        font-size: clamp(1.5rem, 4vw, 2rem);
    }
    
    .map-wrapper {
        display: flex;
        flex-wrap: wrap;
        gap: 30px;
        align-items: flex-start;
    }
    
    .map-wrapper iframe {
        flex: 1;
        min-width: 300px;
        height: 450px;
        border-radius: 10px;
        border: none;
        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }
    
    .map-text {
        flex: 1;
        min-width: 280px;
        color: #fff;
    }
    
    .map-text h2 {
        color: #27F531;
        margin-bottom: 15px;
        font-size: clamp(1.3rem, 3vw, 1.8rem);
    }
    
    .map-text p {
        font-size: clamp(0.95rem, 2vw, 1.1rem);
        line-height: 1.8;
    }

    .footer {
        margin-top: 50px;
        padding: 30px 20px;
        background: #0d1b24;
        color: #fff;
        text-align: center;
        border-top: 1px solid rgba(255,255,255,0.1);
    }
    
    .footer .icons {
        margin-bottom: 15px;
    }
    
    .footer .icons a {
        color: #FFD700;
        margin: 0 12px;
        font-size: 1.5rem;
        transition: all 0.3s;
        display: inline-block;
    }
    
    .footer .icons a:hover {
        color: #27F531;
        transform: translateY(-3px);
    }
    
    .footer p {
        font-size: clamp(0.9rem, 2vw, 1rem);
    }
    
    .footer .designer {
        color: #27F531;
        font-weight: bold;
    }

    @keyframes fadeInDown {
        from { opacity: 0; transform: translateY(-40px); }
        to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    /* Tablet */
    @media (max-width: 768px) {
        nav.header-bar {
            padding: 15px 20px;
            height: 70px;
        }
        
        .container {
            margin-top: 90px;
            padding: 15px;
        }
        
        .welcome-card {
            padding: 30px 20px;
        }
        
        .map-wrapper {
            flex-direction: column;
        }
        
        .map-wrapper iframe {
            width: 100%;
            height: 400px;
        }
        
        .auth-buttons button {
            padding: 7px 16px;
        }
    }

    /* Mobile */
    @media (max-width: 480px) {
        .menu-toggle {
            top: 15px;
            left: 15px;
            font-size: 20px;
            padding: 8px;
        }
        
        nav.header-bar {
            padding: 12px 15px;
            height: 60px;
            flex-direction: column;
            gap: 10px;
        }
        
        .auth-buttons {
            position: static;
            transform: none;
        }
        
        .auth-buttons button {
            padding: 6px 14px;
            font-size: 0.85rem;
        }
        
        .sidebar {
            width: 85vw;
            left: -85vw;
        }
        
        .wrapper.active .sidebar {
            left: 0;
        }
        
        .container {
            margin-top: 80px;
            padding: 12px;
        }
        
        .welcome-card {
            padding: 25px 15px;
            margin-bottom: 25px;
        }
        
        .dropdown {
            margin-bottom: 15px;
        }
        
        .dropdown label {
            padding: 12px 15px;
        }
        
        .dropdown-content {
            padding: 12px 15px 15px 15px;
        }
        
        .map {
            padding: 20px 15px;
        }
        
        .map-wrapper iframe {
            height: 300px;
            min-width: 100%;
        }
        
        .footer {
            padding: 25px 15px;
        }
        
        .footer .icons a {
            margin: 0 8px;
            font-size: 1.3rem;
        }
    }

    /* Extra small devices */
    @media (max-width: 360px) {
        .sidebar {
            width: 100vw;
            left: -100vw;
        }
        
        .welcome-card {
            padding: 20px 12px;
        }
        
        .main-btn button {
            padding: 10px 25px;
        }
        
        .map-wrapper iframe {
            height: 250px;
        }
    }
     /* Chat box styles */
    .chat-window {
        position: fixed;
        bottom: 100px;
        right: 20px;
        width: 350px;
        height: 500px;
        background: #fff;
        border-radius: 15px;
        box-shadow: 0 5px 25px rgba(0,0,0,0.2);
        display: none;
        flex-direction: column;
        overflow: hidden;
        z-index: 1000;
    }

    body.chat-open .chat-window {
        display: flex;
    }

    .chat-window .close {
        position: absolute;
        top: 10px;
        right: 10px;
        background: none;
        border: none;
        color: #666;
        cursor: pointer;
        font-size: 1rem;
        padding: 5px;
    }

    .chat-window .chat {
        flex: 1;
        padding: 20px;
        overflow-y: auto;
        background: #f5f5f5;
    }

    .chat .user,
    .chat .model,
    .chat .faq-message {
        margin-bottom: 15px;
        max-width: 80%;
    }

    .chat .user {
        margin-left: auto;
    }

    .chat .user p {
        background: #27ae60;
        color: white;
        padding: 10px 15px;
        border-radius: 15px 15px 0 15px;
    }

    .chat .model p {
        background: #fff;
        color: #333;
        padding: 10px 15px;
        border-radius: 15px 15px 15px 0;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .chat .faq-message p {
        background: #f0f0f0;
        color: #27ae60;
        padding: 10px 15px;
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .chat .faq-message p:hover {
        background: #27ae60;
        color: white;
    }

    .chat-window .input-area {
        padding: 15px;
        background: #fff;
        border-top: 1px solid #eee;
        display: flex;
        gap: 10px;
    }

    .input-area input {
        flex: 1;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 20px;
        outline: none;
        font-size: 0.9rem;
    }

    .input-area button {
        background: #27ae60;
        color: white;
        border: none;
        border-radius: 50%;
        width: 35px;
        height: 35px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
    }

    .input-area button:hover {
        background: #2ecc71;
        transform: scale(1.05);
    }

    .input-area button img {
        width: 18px;
        height: 18px;
    }

    .chat-button {
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 60px;
        height: 60px;
        background: #27ae60;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        transition: all 0.3s ease;
        z-index: 999;
    }

    .chat-button:hover {
        transform: scale(1.1);
        background: #2ecc71;
    }

    .chat-button img {
        width: 30px;
        height: 30px;
    }

    /* Chat responsiveness */
    @media (max-width: 480px) {
        .chat-window {
            width: 100%;
            height: 100%;
            bottom: 0;
            right: 0;
            border-radius: 0;
        }

        .chat-button {
            width: 50px;
            height: 50px;
            bottom: 15px;
            right: 15px;
        }

        .chat-button img {
            width: 25px;
            height: 25px;
        }
    }
  </style>
</head>
<body>
    <section class="chat-window">
        <button class="close">x close</button>
        <div class="chat">
            <div class="model">
                <p>Hi, how can I help you? Click a question below or type your own!</p>
            </div>
        </div>
        <div class="input-area">
            <input placeholder="Ask me anything..." type="text">
            <button>
                <i class="fa-solid fa-paper-plane" style="color: white;"></i>
            </button>
        </div>
    </section>

    <div class="chat-button">
        <i class="fa-solid fa-comments" style="color: white; font-size: 24px;"></i>
    </div>

    <script src="chat.js"></script>
  <div class="menu-toggle" onclick="toggleSidebar()">
    <i class="fa-solid fa-bars"></i>
  </div>

  <div class="wrapper">
    <div class="sidebar-overlay" onclick="toggleSidebar()"></div>
    
    <div class="sidebar">
      <h2>TBM</h2>
      <ul>
        <li><a href="/Passenger/home.html"><i class="fa-solid fa-house"></i> Home</a></li>
        <li><a href="/Passenger/About page.html"><i class="fa-solid fa-bus"></i> About</a></li>
        <li><a href="/Passenger/Payment Gate.php"><i class="fa-solid fa-credit-card"></i> Bus card</a></li>
      </ul>
    </div>

    <nav class="header-bar">
      <div class="logo">
        <h1>TSHWANE<span>BUSMATE</span></h1>
      </div>
      <div class="auth-buttons">
        <a href="/Passenger/login.html" style="text-decoration:none;">
          <button class="login-btn">Log In</button>
        </a>
        <a href="/Passenger/signup.php" style="text-decoration:none;">
          <button class="signup-btn">Sign Up</button>
        </a>
      </div>
    </nav>

    <div class="container">
      <div class="welcome-card" id="welcomeCard">
        <h1>Welcome!</h1>
        <h2>To <span>TshwaneBusMate</span></h2>
        <p>Choose us because we choose YOU! Read more on our <span style="color:#FFD700; font-weight:bold;">About</span> page.</p>
        <div class="main-btn">
          <a href="/Passenger/About page.html"><button>About</button></a>
        </div>
      </div>

      <div class="container">
        <h1>Select Your Area</h1>
        <div class="dropdown">
          <h3> <span  style="color:#FFD700; font-weight:bold;">Centurion</span></h3>
          <p>Explore bus routes in Centurion.</p>
          <button class="routes_btn" onclick="goToPage('Centurion Routes.html')"><span><i class="fa-solid fa-location-dot"></i></span>  View Bus Routes</button>
        </div>
        <div class="dropdown">
          <h3 <span style="color:#FFD700; font-weight:bold;">Pretoria East</span></h3>
          <p>Explore bus routes in Pretoria East.</p>
          <button class="routes_btn" onclick="goToPage('Pretoria East Routes.html')"><span><i class="fa-solid fa-location-dot"></i></span>  View Bus Routes</button>
        </div>
        <div class="dropdown">
          <h3> <span style="color:#FFD700; font-weight:bold;">Pretoria West</span></h3>
          <p>Explore bus routes in Pretoria West.</p>
          <button class="routes_btn" onclick="goToPage('Pretoria West Routes.html')"><span><i class="fa-solid fa-location-dot"></i></span>  View Bus Routes</button>
        </div>
        <div class="dropdown">
          <h3> <span style="color:#FFD700; font-weight:bold;">Pretoria Central</span></h3>
          <p>Explore bus routes in Pretoria Central.</p>
          <button class="routes_btn" onclick="goToPage('Pretoria Central Routes.html')"><span><i class="fa-solid fa-location-dot"></i></span>  View Bus Routes</button>
        </div>
        <div class="dropdown">
          <h3> <span style="color:#FFD700; font-weight:bold;">Pretoria Moot</span></h3>
          <p>Explore bus routes in Pretoria Moot.</p>
          <button class="routes_btn" onclick="goToPage('Pretoria Moot Routes.html')"><span><i class="fa-solid fa-location-dot"></i></span>  View Bus Routes</button>
        </div>
        <div class="dropdown">
          <h3> <span style="color:#FFD700; font-weight:bold;">Pretoria North</span></h3>
          <p>Explore bus routes in Pretoria North.</p>
          <button class="routes_btn" onclick="goToPage('Pretoria North Routes.html')"><span><i class="fa-solid fa-location-dot"></i></span>  View Bus Routes</button>
        </div>
      </div>

      <section class="map" id="aboutSection">
        <h1>Live Traffic Map</h1>
        <div class="map-wrapper">
          <iframe 
            src="https://embed.waze.com/iframe?zoom=14&lat=-26.2361&lon=28.3694&ct=livemap" 
            allowfullscreen>
          </iframe>
          <div class="map-text">
            <h2>Live Traffic View</h2>
            <p>Stay ahead of delays! Use our real-time map to track traffic and plan your bus journey with ease. Get live updates on road conditions, accidents, and optimal routes to ensure you reach your destination on time.</p>
          </div>
        </div>
      </section>

      <div class="footer">
        <div class="icons">
            <a href="https://twitter.com/?lang=en-za" aria-label="Twitter"><i class="fa-brands fa-twitter"></i></a>
            <a href="https://www.facebook.com/" aria-label="Facebook"><i class="fa-brands fa-facebook"></i></a>
            <a href="https://www.instagram.com/" aria-label="Instagram"><i class="fa-brands fa-square-instagram"></i></a>
        </div>
        <p>Copyright &copy;2025; Designed by <span class="designer">Tshwane BusMate Team</span></p>
      </div>
    </div>
  </div>

  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js')
      .then(registration => {
        console.log("Service Worker registered with scope:", registration.scope);
      })
      .catch(error => {
        console.log("Service Worker registration failed:", error);
      });
    }
    document.addEventListener("DOMContentLoaded", () => {
    const inputField = document.querySelector(".chat-window .input-area input");
    const sendButton = document.querySelector(".chat-window .input-area button");
    const chatBox = document.querySelector(".chat-window .chat");
    const chatWindow = document.querySelector(".chat-window");
    const chatButton = document.querySelector(".chat-button");
    let hasAskedQuestion = false; // Track if user has asked a typed question

    // Rules 
    const rules = [
    {
        keywords: ["fare", "price", "cost", "how much", "ticket price", "charge", "band", "distance fare"],
        response: "💰 Bus Fares (effective 1 July 2025 - 30 June 2026):\n- Minimum: R13.00 (0-8 km)\n- Maximum: R35.00 (>48 km)\nFull bands: R13 (0-8km), R19 (8-14km), R23.50 (14-21km), R26 (21-29km), R30 (29-38km), R32 (38-48km), R35 (>48km).\nConcessions: Students R12.50, Disabled R14.50, Pensioners free off-peak (>65) or 25% off (60-65). Use Connector Card only."
    },
    {
        keywords: ["route", "bus route", "routes", "from to", "where goes", "line", "number route"],
        response: "🛣️ Tshwane Bus Routes: Routes run clockwise from Colbyn (Church Street East) onwards. Key areas include Centurion, Pretoria Central, North, East, West, and Moot.\nView full timetables and routes at www.tshwane.gov.za/?page_id=723 or use the A Re Yeng Mobile App."
    },
    {
        keywords: ["lost property", "lost item", "left something", "found item", "lost and found", "forgot item"],
        response: "🔍 Lost Property: If you've lost an item on a TBS bus, visit Church Square to collect it. Provide details like date, route, and description. Call 012 358 9999 for assistance. Items are held for a limited time."
    },
    {
        keywords: ["concession", "discount", "student", "senior", "pensioner", "disabled", "accessibility", "wheelchair", "scholar"],
        response: "♿ Concessions & Accessibility:\n- Scholars (up to Grade 12, age 19): R12.50 flat fare.\n- Disabled: R14.50 flat fare (any distance).\n- Pensioners 60-65: 25% off off-peak/weekends/holidays; >65: Free off-peak/weekends/holidays.\nBuses are wheelchair accessible (every second bus has a ramp). Apply for concession cards at TBS offices with ID/photo. Renew annually for scholars."
    },
    {
        keywords: ["complaint", "feedback", "issue", "problem", "report fault", "delay", "late bus"],
        response: "📞 Customer Service: For complaints, feedback, delays, or issues, call 012 358 9999 (toll-free: 080 111 1556) or email tbs@tshwane.gov.za. Lodge online via e-Tshwane portal. We're here to help improve your ride!"
    },
    {
        keywords: ["bus stop", "where to board", "pick up", "stop location", "station"],
        response: "🚌 Bus Stops: Catch buses at designated stops across Tshwane (e.g., Church Square, Centurion Mall). Use the timetable at www.tshwane.gov.za/?page_id=723 or the A Re Yeng Mobile App for real-time locations and maps."
    },
    {
        keywords: ["app", "mobile app", "real time", "tracking", "live location", "moving gauteng"],
        response: "📱 Mobile App: Download the A Re Yeng Mobile App or Moving Gauteng App for routes, stops, timetables, and real-time bus tracking. Available on Google Play and App Store. No real-time delays alerts yet, but check the app for updates."
    },
    {
        keywords: ["bus hire", "charter", "rent bus", "group transport", "special hire"],
        response: "🚍 Bus Hire: TBS buses can be hired for groups during off-peak periods. Contact 012 358 9999 for conditions, rates, and availability. Ideal for events or corporate transport."
    },
    {
        keywords: ["connector card", "buy card", "get card", "reload", "top up", "load money"],
        response: "💳 Connector Card: Buy your first card for R30 at TBS offices, Walk-in Centres (e.g., Church Square), or A Re Yeng stations. Reload at stations, ABSA ATMs (chip-enabled), or the app. No cash on buses—use Connector Card only."
    },
    {
        keywords: ["gautrain", "integration", "connect gautrain", "transfer"],
        response: "🔗 Integration with Gautrain: TBS connects to Gautrain stations (e.g., Pretoria Station). Use Connector Card for seamless travel. Wheelchair access available on every second TBS bus and all Gautrain trains. Check Moving Gauteng App for transfers."
    },
    {
        keywords: ["holiday", "public holiday", "sunday", "no service", "festive season"],
        response: "🎉 Public Holidays & Sundays: No service on Sundays and most public holidays. On festive periods (e.g., Dec 24-31, 2024/2025), reduced or no service—check www.tshwane.gov.za for updates. Full service resumes post-holidays."
    },
    {
        keywords: ["emergency", "fire", "medical", "police", "help on bus"],
        response: "🚨 Emergency Services: For emergencies on a bus, contact the driver or call 107 (Tshwane Emergency), 10111 (Police), or 012 358 9999 (TBS). Fire stations by region available at www.tshwane.gov.za."
    },
    {
        keywords: ["timetable", "schedule download", "pdf timetable"],
        response: "📅 Timetables: Download PDFs for Monday-Friday, Saturday, and Sunday routes at www.tshwane.gov.za/?page_id=723. Routes start clockwise from Colbyn. Use A Re Yeng App for mobile access."
    },
    {
        keywords: ["wheelchair", "disabled access", "ramp", "universal access"],
        response: "♿ Accessibility: TBS buses have wheelchair ramps on every second vehicle and designated spaces. Stations have inconsistent universal access—report issues to 012 358 9999. Concession fare: R14.50 flat for disabled."
    },
    {
        keywords: ["claim", "third party", "accident", "injury bus"],
        response: "⚠️ Third Party Claims: For accidents or injuries on TBS, follow the claim process at www.tshwane.gov.za/?page_id=719. Submit forms with details to the Call Centre (012 358 9999)."
    }
    ];

    // FAQs
    const faqs = [
        {
            question: "What are the operating hours of Tshwane Bus Services?",
            answer: "🚌 Our operating hours are:\nMon–Fri: 05:00–19:45\nSat: 05:00–17:00\nSun & Public Holidays: No service."
        },
        {
            question: "How can I pay for my bus ride?",
            answer: "💳 We only accept the *Connector Card* (no cash). You can buy or top it up at Tswane bus offices or on the app."
        },
        {
            question: "How can I contact Tshwane Bus Services?",
            answer: "☎️ Contact Us:\nPhone: +27 12 358 9999\nEmail: tbs@tshwane.gov.za\nWebsite: www.tshwane.gov.za"
        }
    ];

    // Function to add messages to chat
    function addMessage(message, sender) {
        const messageElement = document.createElement("div");
        messageElement.classList.add(sender);
        const p = document.createElement("p");
        p.textContent = message;
        messageElement.appendChild(p);
        chatBox.appendChild(messageElement);
        chatBox.scrollTop = chatBox.scrollHeight;
    }

    // Function to add FAQ messages
    function addFAQMessages() {
        if (!hasAskedQuestion) {
            faqs.forEach((faq, index) => {
                const faqElement = document.createElement("div");
                faqElement.classList.add("faq-message");
                const p = document.createElement("p");
                p.textContent = faq.question;
                p.dataset.faqIndex = index;
                faqElement.appendChild(p);
                chatBox.appendChild(faqElement);
            });
            chatBox.scrollTop = chatBox.scrollHeight;
        }
    }

    // Function to handle FAQ click
    function handleFAQClick(e) {
        e.stopPropagation(); // Prevent outside click event from closing the chat
        const faqIndex = e.target.dataset.faqIndex;
        if (faqIndex !== undefined) {
            // Remove all FAQ messages
            const faqMessages = document.querySelectorAll(".faq-message");
            faqMessages.forEach((msg) => msg.remove());
            // Add the selected FAQ question and answer
            const faq = faqs[faqIndex];
            addMessage(faq.question, "user");
            addMessage(faq.answer, "model");
        }
    }

    // Handle user input
    function handleUserInput() {
        const userInput = inputField.value.trim().toLowerCase();
        if (userInput === "") return;

        // Remove FAQs and mark that user has asked a question
        hasAskedQuestion = true;
        const faqMessages = document.querySelectorAll(".faq-message");
        faqMessages.forEach((msg) => msg.remove());

        addMessage(inputField.value, "user");
        inputField.value = "";

        let botResponse = "🤔 Sorry, I didn’t understand. Try asking about *hours, payment, refunds, or contact info*.";

        // Check all rules
        for (let rule of rules) {
            for (let keyword of rule.keywords) {
                if (userInput.includes(keyword)) {
                    botResponse = rule.response;
                    break;
                }
            }
            if (botResponse !== "🤔 Sorry, I didn’t understand. Try asking about *hours, payment, refunds, or contact info*.") break;
        }

        addMessage(botResponse, "model");
    }

    // Event listeners for chat input
    sendButton.addEventListener("click", handleUserInput);
    inputField.addEventListener("keypress", (e) => {
        if (e.key === "Enter") handleUserInput();
    });

    // Open chat
    chatButton.addEventListener("click", (e) => {
        e.stopPropagation();
        document.body.classList.add("chat-open");
        addFAQMessages(); // Add FAQs if user hasn't asked a question
    });

    // Close chat
    document.querySelector(".chat-window button.close").addEventListener("click", (e) => {
        e.stopPropagation();
        document.body.classList.remove("chat-open");
        // Clear FAQs when closing
        const faqMessages = document.querySelectorAll(".faq-message");
        faqMessages.forEach((msg) => msg.remove());
    });

    // Close chat when clicking outside
    document.addEventListener("click", (e) => {
        if (!chatWindow.contains(e.target) && !chatButton.contains(e.target)) {
            document.body.classList.remove("chat-open");
            // Clear FAQs when closing
            const faqMessages = document.querySelectorAll(".faq-message");
            faqMessages.forEach((msg) => msg.remove());
        }
    });

    // Handle FAQ clicks
    chatBox.addEventListener("click", handleFAQClick);

    // Add FAQs on initial load
    addFAQMessages();
});
 function goToPage(page) {
      window.location.href = '/Passenger/' + page;
    }
    function toggleSidebar() {
      document.querySelector('.wrapper').classList.toggle('active');
    }

    document.querySelectorAll('.dropdown input[type="checkbox"]').forEach(function(checkbox) {
      checkbox.addEventListener('change', function() {
        if (this.checked) {
          document.querySelectorAll('.dropdown input[type="checkbox"]').forEach(function(other) {
            if (other !== checkbox) other.checked = false;
          });
        }
      });
    });

  </script>
</body>
</html>
