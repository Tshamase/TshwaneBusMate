<!--Driver instance-->
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Garsfontein 2 Driver</title>
  <link rel="stylesheet" type="text/css" href="routes.css">
	<!--Leaflet library map styling and script-->
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>
  	<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
     crossorigin=""></script>
	 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

</head>

<body>
	<div class="menu-toggle" onclick="toggleSidebar()">
		<i class="fa-solid fa-bars"></i>
	</div>

	<div class="wrapper">
		<div class="sidebar">
			<h2>TBM</h2>
			<ul>
			<li><a href=""><i class="fa-solid fa-house"></i>Home</a></li>
			<li><a href=""><i class="fa-solid fa-map-location"></i>Schedule</a></li>
			</ul>
		</div> 
	
		<nav class="header-bar">
			<div class="logo">
				<h1>TSHWANEBUSMATE</h1>
			</div>
		</nav>
		<!--Legend for whether or not cerain times are active, delayed or not comming-->
		<div class="key-table">
			<h4>Legend</h4>

			<ul>
				<li><span class="red"></span> Not Coming</li>
				<li><span class="green"></span> Coming</li>
				<li><span class="orange"></span> Delayed</li>
			</ul>
		</div>

			<div id="back"><a href="Drivers TimeTable.html">Back to Schedule</a></div>
			
			<!--Leaflet map display-->
			<div class="page1">
				<div class="map">
					<h1>Driver / Bus Page</h1>
					<p id="status">Connecting to server...</p>
					<h2>Garsfontein (2) Map:</h2>
				<div id="map"></div>
				</div>
			</div>
		</div>

	<script id="points" type="text/csv">
		lng, lat
		28.1865215,-25.7450286
		28.1892256,-25.7448373
		28.1968687,-25.7443178
		28.1977354,-25.7450569
		28.1978963,-25.7469114
		28.1979909,-25.7482498
		28.1996228,-25.7510156
		28.2088201,-25.7538698
		28.2108031,-25.753939
		28.2135953,-25.7542764
		28.2161617,-25.7546178
		28.2174599,-25.7557387
		28.2198332,-25.7595082
		28.2236635,-25.7572707
		28.2260237,-25.7559409
		28.2319564,-25.7566767
		28.2419229,-25.7590515
		28.2455189,-25.7612366
		28.2474949,-25.7636351
		28.2540088,-25.7660976
		28.2566715,-25.7668093
		28.2629393,-25.7706702
		28.2672444,-25.7737124
		28.2710128,-25.7774568
		28.2750915,-25.7802611
		28.278612,-25.7817005
		28.2893986,-25.7835157
		28.2903561,-25.7858646
		28.2943508,-25.788524829
		28.3062104,-25.79647330
		28.3088777,-25.800602131
		28.3105511,-25.802996632
		28.314536,-25.801323634
		28.3235039,-25.804513635
		28.3240334,-25.806066836
		28.322588,-25.806876
		28.319056,-25.807255
		28.3174547,-25.8060329
		28.315883,-25.8060153
		28.3137514,-25.8053598
		28.3148826,-25.8064054
		28.3148898,-25.8071032
		28.313656,-25.8067845
		28.3108983,-25.8059744
		28.3079608,-25.8081211
		28.3065534,-25.807474
		28.3053518,-25.8059707
		28.3070715,-25.8049335
		28.310237,-25.803667
		28.3088933,-25.8009384
		28.3061889,-25.7965093
		28.2971297,-25.7901702
		28.2894063,-25.7838513
		28.2757183,-25.7808595
		28.2692678,-25.776222
		28.2571575,-25.765433
		28.2544784,-25.7622107
		28.2356243,-25.757715
		28.2261876,-25.7562026
		28.2223716,-25.7587067
		28.2194505,-25.7586277
		28.2173419,-25.7557097
		28.2158877,-25.7546696
		28.2087619,-25.7539607
		28.2055071,-25.7525482
		28.2036455,-25.7512061
		28.203669,-25.7512167
		28.2041282,-25.7492862
		28.2040485,-25.7479478
		28.2036009,-25.7469056
		28.200869,-25.7469837
		28.1989966,-25.7471997
		28.1952847,-25.7474754
		28.1925684,-25.7476734
		28.1901228,-25.7478582
		28.1875745,-25.7480207
		28.1824665,-25.748335281
	</script>

	<!--Time animation legend script-->
	<script src="legend.js"></script>

	<script>
		function toggleSidebar() {
			document.querySelector('.wrapper').classList.toggle('active');
		}
		window.addEventListener('click', function(e) {
			const wrapper = document.querySelector('.wrapper');
			const sidebar = document.querySelector('.sidebar');
			const toggle = document.querySelector('.menu-toggle');
			if (!sidebar.contains(e.target) && !toggle.contains(e.target)) {
			wrapper.classList.remove('active');
			}
		});
	</script>

	<!--Combined driver script - handles map display AND GPS sending-->
	<script src="driver-map-and-gps.js"></script>
	
</body>
</html>